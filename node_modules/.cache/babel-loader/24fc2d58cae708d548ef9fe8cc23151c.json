{"ast":null,"code":"/*!\n * Raty - A Star Rating Plugin\n *\n * The MIT License\n *\n * author:  Washington Botelho\n * github:  wbotelhos/raty\n * version: 3.1.0\n *\n */\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['jquery'], factory);\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = factory(require('jquery'));\n  } else {\n    factory(root.jQuery);\n  }\n})(this, function ($) {\n  'use strict';\n\n  $.raty = {\n    cancelButton: false,\n    cancelClass: 'raty-cancel',\n    cancelHint: 'Cancel this rating!',\n    cancelOff: 'cancel-off.png',\n    cancelOn: 'cancel-on.png',\n    cancelPlace: 'left',\n    click: undefined,\n    half: false,\n    halfShow: true,\n    hints: ['bad', 'poor', 'regular', 'good', 'gorgeous'],\n    iconRange: undefined,\n    iconRangeSame: false,\n    mouseout: undefined,\n    mouseover: undefined,\n    noRatedMsg: 'Not rated yet!',\n    number: 5,\n    numberMax: 20,\n    path: undefined,\n    precision: false,\n    readOnly: false,\n    round: {\n      down: 0.25,\n      full: 0.6,\n      up: 0.76\n    },\n    score: undefined,\n    scoreName: 'score',\n    single: false,\n    space: true,\n    starHalf: 'star-half.png',\n    starOff: 'star-off.png',\n    starOn: 'star-on.png',\n    starType: 'img',\n    target: undefined,\n    targetFormat: '{score}',\n    targetKeep: false,\n    targetScore: undefined,\n    targetText: '',\n    targetType: 'hint'\n  };\n\n  $.fn.raty = function (options) {\n    return this.each(function () {\n      var instance = new $.raty.Raty(this, options);\n      return instance._create();\n    });\n  };\n\n  $.raty.Raty = function () {\n    var Raty = function Raty(element, options) {\n      this.element = element;\n      this.self = $(element);\n      this.opt = $.extend(true, {}, $.raty, options, this.self.data());\n    };\n\n    Raty.prototype = {\n      _create: function _create() {\n        this._executeCallbacks();\n\n        this._adjustNumber();\n\n        this._adjustHints();\n\n        this.opt.score = this._adjustedScore(this.opt.score);\n\n        if (this.opt.starType !== 'img') {\n          this._adjustStarName();\n        }\n\n        this._setPath();\n\n        this._createStars();\n\n        if (this.opt.cancelButton) {\n          this._createCancel();\n        }\n\n        if (this.opt.precision) {\n          this._adjustPrecision();\n        }\n\n        this._createScore();\n\n        this._apply(this.opt.score);\n\n        this._setTitle(this.opt.score);\n\n        this._target(this.opt.score);\n\n        if (this.opt.readOnly) {\n          this._lock();\n        } else {\n          this.element.style.cursor = 'pointer';\n\n          this._binds();\n        }\n\n        this.self.data('raty', this);\n      },\n      // TODO: model spec\n      _adjustedScore: function _adjustedScore(score) {\n        if (score || score === 0) {\n          return this._between(score, 0, this.opt.number);\n        }\n      },\n      _adjustHints: function _adjustHints() {\n        if (!this.opt.hints) {\n          this.opt.hints = [];\n        }\n\n        if (!this.opt.halfShow && !this.opt.half) {\n          return;\n        }\n\n        var steps = this.opt.precision ? 10 : 2;\n\n        for (var i = 0; i < this.opt.number; i++) {\n          var group = this.opt.hints[i];\n\n          if (Object.prototype.toString.call(group) !== '[object Array]') {\n            group = [group];\n          }\n\n          this.opt.hints[i] = [];\n\n          for (var j = 0; j < steps; j++) {\n            var hint = group[j];\n            var last = group[group.length - 1];\n\n            if (last === undefined) {\n              last = null;\n            }\n\n            this.opt.hints[i][j] = hint === undefined ? last : hint;\n          }\n        }\n      },\n      _adjustNumber: function _adjustNumber() {\n        this.opt.number = this._between(this.opt.number, 1, this.opt.numberMax);\n      },\n      _adjustPrecision: function _adjustPrecision() {\n        this.opt.half = true;\n      },\n      _adjustStarName: function _adjustStarName() {\n        var replaces = ['cancelOff', 'cancelOn', 'starHalf', 'starOff', 'starOn'];\n        this.opt.path = '';\n\n        for (var i = 0; i < replaces.length; i++) {\n          this.opt[replaces[i]] = this.opt[replaces[i]].replace('.', '-');\n        }\n      },\n      // TODO: model spec\n      _apply: function _apply(score) {\n        this._fill(score);\n\n        if (score) {\n          if (score > 0) {\n            this.scoreField.val(score);\n          }\n\n          this._roundStars(score);\n        }\n      },\n      _attributesForIndex: function _attributesForIndex(i) {\n        var name = this._nameForIndex(i);\n\n        var attributes = {\n          alt: i,\n          src: this.opt.path + this.opt[name]\n        };\n\n        if (this.opt.starType !== 'img') {\n          attributes = {\n            'data-alt': i,\n            'class': this.opt[name]\n          };\n        }\n\n        attributes.title = this._getHint(i);\n        return attributes;\n      },\n      _between: function _between(value, min, max) {\n        return Math.min(Math.max(parseFloat(value), min), max);\n      },\n      // TODO: model spec\n      _binds: function _binds() {\n        if (this.cancelButton) {\n          this._bindOverCancel();\n\n          this._bindClickCancel();\n\n          this._bindOutCancel();\n        }\n\n        this._bindOver();\n\n        this._bindClick();\n\n        this._bindOut();\n      },\n      // TODO: model spec\n      _bindClick: function _bindClick() {\n        var that = this;\n        this.stars.on('click.raty', function (evt) {\n          if (that.self.data('readonly')) {\n            return;\n          }\n\n          var execute = true;\n          var score = that.opt.half || that.opt.precision ? that.self.data('score') : this.alt || $(this).data('alt');\n\n          if (that.opt.half && !that.opt.precision) {\n            score = that._roundHalfScore(score);\n          }\n\n          if (that.opt.click) {\n            execute = that.opt.click.call(that.element, +score, evt);\n          }\n\n          if (execute || execute === undefined) {\n            that._apply(+score);\n          }\n        });\n      },\n      // TODO: model spec\n      _bindClickCancel: function _bindClickCancel() {\n        this.cancelButton.on('click.raty', function (evt) {\n          this.scoreField.removeAttr('value');\n\n          if (this.opt.click) {\n            this.opt.click.call(this.element, null, evt);\n          }\n        }.bind(this));\n      },\n      // TODO: model spec\n      _bindOut: function _bindOut() {\n        this.self.on('mouseleave.raty', function (evt) {\n          var score = +this.scoreField.val() || undefined;\n\n          this._apply(score);\n\n          this._target(score, evt);\n\n          this._resetTitle();\n\n          if (this.opt.mouseout) {\n            this.opt.mouseout.call(this.element, score, evt);\n          }\n        }.bind(this));\n      },\n      // TODO: model spec\n      _bindOutCancel: function _bindOutCancel() {\n        var that = this;\n        this.cancelButton.on('mouseleave.raty', function (evt) {\n          var icon = that.opt.cancelOff;\n\n          if (that.opt.starType !== 'img') {\n            icon = that.opt.cancelClass + ' ' + icon;\n          }\n\n          that._setIcon(this, icon);\n\n          if (that.opt.mouseout) {\n            var score = +that.scoreField.val() || undefined;\n            that.opt.mouseout.call(that.element, score, evt);\n          }\n        });\n      },\n      // TODO: model spec\n      _bindOver: function _bindOver() {\n        var that = this;\n        var action = that.opt.half ? 'mousemove.raty' : 'mouseover.raty';\n        this.stars.on(action, function (evt) {\n          var score = that._getScoreByPosition(evt, this);\n\n          that._fill(score);\n\n          if (that.opt.half) {\n            that._roundStars(score, evt);\n\n            that._setTitle(score, evt);\n\n            that.self.data('score', score);\n          }\n\n          that._target(score, evt);\n\n          if (that.opt.mouseover) {\n            that.opt.mouseover.call(that.element, score, evt);\n          }\n        });\n      },\n      // TODO: model spec\n      _bindOverCancel: function _bindOverCancel() {\n        var that = this;\n        this.cancelButton.on('mouseover.raty', function (evt) {\n          if (that.self.data('readonly')) {\n            return;\n          }\n\n          var starOff = that.opt.path + that.opt.starOff;\n          var icon = that.opt.cancelOn;\n\n          if (that.opt.starType === 'img') {\n            that.stars.attr('src', starOff);\n          } else {\n            icon = that.opt.cancelClass + ' ' + icon;\n            that.stars.attr('class', starOff);\n          }\n\n          that._setIcon(this, icon);\n\n          that._target(null, evt);\n\n          if (that.opt.mouseover) {\n            that.opt.mouseover.call(that.element, null);\n          }\n        });\n      },\n      // TODO: model spec\n      _buildScoreField: function _buildScoreField() {\n        return $('<input />', {\n          name: this.opt.scoreName,\n          type: 'hidden'\n        }).appendTo(this.self);\n      },\n      // TODO: model spec\n      _createCancel: function _createCancel() {\n        var icon = this.opt.path + this.opt.cancelOff;\n        var button = $('<' + this.opt.starType + ' />', {\n          title: this.opt.cancelHint,\n          'class': this.opt.cancelClass\n        });\n\n        if (this.opt.starType === 'img') {\n          button.attr({\n            src: icon,\n            alt: 'x'\n          });\n        } else {\n          // TODO: use $.data\n          button.attr('data-alt', 'x').addClass(icon);\n        }\n\n        if (this.opt.cancelPlace === 'left') {\n          this.self.prepend('&#160;').prepend(button);\n        } else {\n          this.self.append('&#160;').append(button);\n        }\n\n        this.cancelButton = button;\n      },\n      // TODO: model spec\n      _createScore: function _createScore() {\n        var score = $(this.opt.targetScore);\n        this.scoreField = score.length ? score : this._buildScoreField();\n      },\n      _createStars: function _createStars() {\n        for (var i = 1; i <= this.opt.number; i++) {\n          var attributes = this._attributesForIndex(i);\n\n          $('<' + this.opt.starType + ' />', attributes).appendTo(this.element);\n\n          if (this.opt.space && i < this.opt.number) {\n            this.self.append('&#160;');\n          }\n        }\n\n        this.stars = this.self.children(this.opt.starType);\n      },\n      // TODO: model spec\n      _error: function _error(message) {\n        $(this).text(message);\n        $.error(message);\n      },\n      _executeCallbacks: function _executeCallbacks() {\n        var options = ['number', 'readOnly', 'score', 'scoreName', 'target', 'path'];\n\n        for (var i = 0; i < options.length; i++) {\n          if (typeof this.opt[options[i]] === 'function') {\n            var value = this.opt[options[i]].call(this.element);\n\n            if (value) {\n              this.opt[options[i]] = value;\n            } else {\n              delete this.opt[options[i]];\n            }\n          }\n        }\n      },\n      // TODO: model spec\n      _fill: function _fill(score) {\n        var hash = 0;\n\n        if (this.opt.iconRangeSame && this.opt.iconRange) {\n          while (hash < this.opt.iconRange.length && this.opt.iconRange[hash].range < score) {\n            hash++;\n          }\n        }\n\n        for (var i = 1; i <= this.stars.length; i++) {\n          var icon;\n          var star = this.stars[i - 1];\n\n          var turnOn = this._turnOn(i, score);\n\n          if (this.opt.iconRange && this.opt.iconRange.length > hash) {\n            var irange = this.opt.iconRange[hash];\n            icon = this._getRangeIcon(irange, turnOn);\n\n            if (i <= irange.range) {\n              this._setIcon(star, icon);\n            }\n\n            if (i === irange.range) {\n              hash++;\n            }\n          } else {\n            icon = this.opt[turnOn ? 'starOn' : 'starOff'];\n\n            this._setIcon(star, icon);\n          }\n        }\n      },\n      _getDecimal: function _getDecimal(number, fractions) {\n        var decimal = number.toString().split('.')[1];\n        var result = 0;\n\n        if (decimal) {\n          result = parseInt(decimal.slice(0, fractions), 10);\n\n          if (decimal.slice(1, 5) === '9999') {\n            result++;\n          }\n        }\n\n        return result;\n      },\n      // TODO: model spec\n      _getRangeIcon: function _getRangeIcon(irange, turnOn) {\n        return turnOn ? irange.on || this.opt.starOn : irange.off || this.opt.starOff;\n      },\n      // TODO: model spec\n      _getScoreByPosition: function _getScoreByPosition(evt, icon) {\n        var score = parseInt(icon.alt || icon.getAttribute('data-alt'), 10);\n\n        if (this.opt.half) {\n          var size = this._getWidth();\n\n          var percent = parseFloat((evt.pageX - $(icon).offset().left) / size);\n          score = score - 1 + percent;\n        }\n\n        return score;\n      },\n      // TODO: model spec\n      _getHint: function _getHint(score, evt) {\n        if (score !== 0 && !score) {\n          return this.opt.noRatedMsg;\n        }\n\n        var decimal = this._getDecimal(score, 1);\n\n        var integer = Math.ceil(score);\n        var group = this.opt.hints[(integer || 1) - 1];\n        var hint = group;\n        var set = !evt || this.isMove;\n\n        if (this.opt.precision) {\n          if (set) {\n            decimal = decimal === 0 ? 9 : decimal - 1;\n          }\n\n          hint = group[decimal];\n        } else if (this.opt.halfShow || this.opt.half) {\n          decimal = set && decimal === 0 ? 1 : decimal > 5 ? 1 : 0;\n          hint = group[decimal];\n        }\n\n        return hint === '' ? '' : hint || score;\n      },\n      // TODO: model spec\n      _getWidth: function _getWidth() {\n        var width = this.stars[0].width || parseFloat(this.stars.eq(0).css('font-size'));\n\n        if (!width) {\n          this._error('Could not get the icon width!');\n        }\n\n        return width;\n      },\n      // TODO: model spec\n      _lock: function _lock() {\n        var hint = this._getHint(this.scoreField.val());\n\n        this.element.style.cursor = '';\n        this.element.title = hint;\n        this.scoreField.prop('readonly', true);\n        this.stars.prop('title', hint);\n\n        if (this.cancelButton) {\n          this.cancelButton.hide();\n        }\n\n        this.self.data('readonly', true);\n      },\n      _nameForIndex: function _nameForIndex(i) {\n        return this.opt.score && this.opt.score >= i ? 'starOn' : 'starOff';\n      },\n      // TODO: model spec\n      _resetTitle: function _resetTitle() {\n        for (var i = 0; i < this.opt.number; i++) {\n          this.stars[i].title = this._getHint(i + 1);\n        }\n      },\n      // TODO: model spec\n      _roundHalfScore: function _roundHalfScore(score) {\n        var integer = parseInt(score, 10);\n\n        var decimal = this._getDecimal(score, 1);\n\n        if (decimal !== 0) {\n          decimal = decimal > 5 ? 1 : 0.5;\n        }\n\n        return integer + decimal;\n      },\n      // TODO: model spec\n      _roundStars: function _roundStars(score, evt) {\n        var name = this._starName(score, evt);\n\n        if (name) {\n          var icon = this.opt[name];\n          var star = this.stars[Math.ceil(score) - 1];\n\n          this._setIcon(star, icon);\n        } // Full down: [x.00 .. x.25]\n\n      },\n      // TODO: model spec\n      _setIcon: function _setIcon(star, icon) {\n        star[this.opt.starType === 'img' ? 'src' : 'className'] = this.opt.path + icon;\n      },\n      _setPath: function _setPath() {\n        this.opt.path = this.opt.path || '';\n\n        if (this.opt.path && this.opt.path.slice(-1)[0] !== '/') {\n          this.opt.path += '/';\n        }\n      },\n      // TODO: model spec\n      _setTarget: function _setTarget(target, score) {\n        if (score) {\n          score = this.opt.targetFormat.toString().replace('{score}', score);\n        }\n\n        if (target.is(':input')) {\n          target.val(score);\n        } else {\n          target.html(score);\n        }\n      },\n      // TODO: model spec\n      _setTitle: function _setTitle(score, evt) {\n        if (score) {\n          var integer = parseInt(Math.ceil(score), 10);\n          var star = this.stars[integer - 1];\n          star.title = this._getHint(score, evt);\n        }\n      },\n      _starName: function _starName(score, evt) {\n        var decimal = +(score % 1).toFixed(2);\n\n        if (evt || this.isMove) {\n          return decimal > 0.5 ? 'starOn' : 'starHalf';\n        }\n\n        if (decimal <= this.opt.round.down) {\n          // Down: [x.00 ... x.25]\n          return;\n        }\n\n        if (this.opt.halfShow && decimal < this.opt.round.up) {\n          // Half: [x.26 ... x.75]\n          return 'starHalf';\n        }\n\n        if (decimal < this.opt.round.full) {\n          // Off: [x.26 .. x.6]\n          return 'starOff';\n        }\n\n        return 'starOn'; // Up: [x.26 ...] || [x.6 ...]\n      },\n      // TODO: model spec\n      _target: function _target(score, evt) {\n        if (this.opt.target) {\n          var target = $(this.opt.target);\n\n          if (!target.length) {\n            this._error('Target selector invalid or missing!');\n          }\n\n          var mouseover = evt && evt.type === 'mouseover';\n\n          if (score === undefined) {\n            score = this.opt.targetText;\n          } else if (score === null) {\n            score = mouseover ? this.opt.cancelHint : this.opt.targetText;\n          } else {\n            if (this.opt.targetType === 'hint') {\n              score = this._getHint(score, evt);\n            } else if (this.opt.precision) {\n              score = parseFloat(score).toFixed(1);\n            }\n\n            var mousemove = evt && evt.type === 'mousemove';\n\n            if (!mouseover && !mousemove && !this.opt.targetKeep) {\n              score = this.opt.targetText;\n            }\n          }\n\n          this._setTarget(target, score);\n        }\n      },\n      // TODO: model spec\n      _turnOn: function _turnOn(i, score) {\n        return this.opt.single ? i === score : i <= score;\n      },\n      // TODO: model spec\n      _unlock: function _unlock() {\n        this.element.style.cursor = 'pointer';\n        this.element.removeAttribute('title');\n        this.scoreField.removeAttr('readonly');\n        this.self.data('readonly', false);\n\n        this._resetTitle();\n\n        if (this.cancelButton) {\n          this.cancelButton.css('display', '');\n        }\n      },\n      // TODO: model spec\n      cancel: function cancel(click) {\n        if (this.self.data('readonly') !== true) {\n          this[click ? 'click' : 'score'].call(this, null);\n          this.scoreField.removeAttr('value');\n        }\n      },\n      // TODO: model spec\n      click: function click(score) {\n        if (this.self.data('readonly') !== true) {\n          score = this._adjustedScore(score);\n\n          this._apply(score);\n\n          if (this.opt.click) {\n            this.opt.click.call(this.element, score, $.Event('click'));\n          }\n\n          this._target(score);\n        }\n      },\n      // TODO: model spec\n      getScore: function getScore() {\n        var score = [];\n        var value;\n        value = this.scoreField.val();\n        score.push(value ? +value : undefined);\n        return score.length > 1 ? score : score[0];\n      },\n      // TODO: model spec\n      move: function move(score) {\n        var integer = parseInt(score, 10);\n\n        var decimal = this._getDecimal(score, 1);\n\n        if (integer >= this.opt.number) {\n          integer = this.opt.number - 1;\n          decimal = 10;\n        }\n\n        var width = this._getWidth();\n\n        var steps = width / 10;\n        var star = $(this.stars[integer]);\n        var percent = star.offset().left + steps * decimal;\n        var evt = $.Event('mousemove', {\n          pageX: percent\n        });\n        this.isMove = true;\n        star.trigger(evt);\n        this.isMove = false;\n      },\n      // TODO: model spec\n      readOnly: function readOnly(readonly) {\n        if (this.self.data('readonly') !== readonly) {\n          if (readonly) {\n            this.self.off('.raty').children(this.opt.starType).off('.raty');\n\n            this._lock();\n          } else {\n            this._binds();\n\n            this._unlock();\n          }\n\n          this.self.data('readonly', readonly);\n        }\n      },\n      // TODO: model spec\n      score: function score() {\n        return arguments.length ? this.setScore.apply(this, arguments) : this.getScore();\n      },\n      setScore: function setScore(score) {\n        if (this.self.data('readonly') !== true) {\n          score = this._adjustedScore(score);\n\n          this._apply(score);\n\n          this._target(score);\n        }\n      }\n    };\n    return Raty;\n  }();\n});","map":{"version":3,"names":["root","factory","define","amd","module","exports","require","jQuery","$","raty","cancelButton","cancelClass","cancelHint","cancelOff","cancelOn","cancelPlace","click","undefined","half","halfShow","hints","iconRange","iconRangeSame","mouseout","mouseover","noRatedMsg","number","numberMax","path","precision","readOnly","round","down","full","up","score","scoreName","single","space","starHalf","starOff","starOn","starType","target","targetFormat","targetKeep","targetScore","targetText","targetType","fn","options","each","instance","Raty","_create","element","self","opt","extend","data","prototype","_executeCallbacks","_adjustNumber","_adjustHints","_adjustedScore","_adjustStarName","_setPath","_createStars","_createCancel","_adjustPrecision","_createScore","_apply","_setTitle","_target","_lock","style","cursor","_binds","_between","steps","i","group","Object","toString","call","j","hint","last","length","replaces","replace","_fill","scoreField","val","_roundStars","_attributesForIndex","name","_nameForIndex","attributes","alt","src","title","_getHint","value","min","max","Math","parseFloat","_bindOverCancel","_bindClickCancel","_bindOutCancel","_bindOver","_bindClick","_bindOut","that","stars","on","evt","execute","_roundHalfScore","removeAttr","bind","_resetTitle","icon","_setIcon","action","_getScoreByPosition","attr","_buildScoreField","type","appendTo","button","addClass","prepend","append","children","_error","message","text","error","hash","range","star","turnOn","_turnOn","irange","_getRangeIcon","_getDecimal","fractions","decimal","split","result","parseInt","slice","off","getAttribute","size","_getWidth","percent","pageX","offset","left","integer","ceil","set","isMove","width","eq","css","prop","hide","_starName","_setTarget","is","html","toFixed","mousemove","_unlock","removeAttribute","cancel","Event","getScore","push","move","trigger","readonly","arguments","setScore","apply"],"sources":["/home/usama/Videos/bookify/app/javascript/packs/jquery.raty.js"],"sourcesContent":["/*!\n * Raty - A Star Rating Plugin\n *\n * The MIT License\n *\n * author:  Washington Botelho\n * github:  wbotelhos/raty\n * version: 3.1.0\n *\n */\n\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['jquery'], factory);\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = factory(require('jquery'));\n  } else {\n    factory(root.jQuery);\n  }\n}(this, function($) {\n  'use strict';\n\n  $.raty = {\n    cancelButton: false,\n    cancelClass:  'raty-cancel',\n    cancelHint:   'Cancel this rating!',\n    cancelOff:    'cancel-off.png',\n    cancelOn:     'cancel-on.png',\n    cancelPlace:  'left',\n    click:        undefined,\n    half:         false,\n    halfShow:     true,\n    hints:        ['bad', 'poor', 'regular', 'good', 'gorgeous'],\n    iconRange:    undefined,\n    iconRangeSame: false,\n    mouseout:     undefined,\n    mouseover:    undefined,\n    noRatedMsg:   'Not rated yet!',\n    number:       5,\n    numberMax:    20,\n    path:         undefined,\n    precision:    false,\n    readOnly:     false,\n    round:        { down: 0.25, full: 0.6, up: 0.76 },\n    score:        undefined,\n    scoreName:    'score',\n    single:       false,\n    space:        true,\n    starHalf:     'star-half.png',\n    starOff:      'star-off.png',\n    starOn:       'star-on.png',\n    starType:     'img',\n    target:       undefined,\n    targetFormat: '{score}',\n    targetKeep:   false,\n    targetScore:  undefined,\n    targetText:   '',\n    targetType:   'hint'\n  };\n\n  $.fn.raty = function(options) {\n    return this.each(function() {\n      var instance = new $.raty.Raty(this, options);\n\n      return instance._create();\n    });\n  };\n\n  $.raty.Raty = (function() {\n    var Raty = function(element, options) {\n      this.element = element;\n      this.self    = $(element);\n      this.opt     = $.extend(true, {}, $.raty, options, this.self.data());\n    };\n\n    Raty.prototype = {\n      _create: function() {\n        this._executeCallbacks();\n        this._adjustNumber();\n        this._adjustHints();\n\n        this.opt.score = this._adjustedScore(this.opt.score);\n\n        if (this.opt.starType !== 'img') {\n          this._adjustStarName();\n        }\n\n        this._setPath();\n        this._createStars();\n\n        if (this.opt.cancelButton) {\n          this._createCancel();\n        }\n\n        if (this.opt.precision) {\n          this._adjustPrecision();\n        }\n\n        this._createScore();\n\n        this._apply(this.opt.score);\n        this._setTitle(this.opt.score);\n        this._target(this.opt.score);\n\n        if (this.opt.readOnly) {\n          this._lock();\n        } else {\n          this.element.style.cursor = 'pointer';\n\n          this._binds();\n        }\n\n        this.self.data('raty', this);\n      },\n\n      // TODO: model spec\n      _adjustedScore: function(score) {\n        if (score || score === 0) {\n          return this._between(score, 0, this.opt.number);\n        }\n      },\n\n      _adjustHints: function() {\n        if (!this.opt.hints) {\n          this.opt.hints = [];\n        }\n\n        if (!this.opt.halfShow && !this.opt.half) {\n          return;\n        }\n\n        var steps = this.opt.precision ? 10 : 2;\n\n        for (var i = 0; i < this.opt.number; i++) {\n          var group = this.opt.hints[i];\n\n          if (Object.prototype.toString.call(group) !== '[object Array]') {\n            group = [group];\n          }\n\n          this.opt.hints[i] = [];\n\n          for (var j = 0; j < steps; j++) {\n            var hint = group[j];\n            var last = group[group.length - 1];\n\n            if (last === undefined) {\n              last = null;\n            }\n\n            this.opt.hints[i][j] = hint === undefined ? last : hint;\n          }\n        }\n      },\n\n      _adjustNumber: function() {\n        this.opt.number = this._between(this.opt.number, 1, this.opt.numberMax);\n      },\n\n      _adjustPrecision: function() {\n        this.opt.half = true;\n      },\n\n      _adjustStarName: function() {\n        var replaces = ['cancelOff', 'cancelOn', 'starHalf', 'starOff', 'starOn'];\n\n        this.opt.path = '';\n\n        for (var i = 0; i < replaces.length; i++) {\n          this.opt[replaces[i]] = this.opt[replaces[i]].replace('.', '-');\n        }\n      },\n\n      // TODO: model spec\n      _apply: function(score) {\n        this._fill(score);\n\n        if (score) {\n          if (score > 0) {\n            this.scoreField.val(score);\n          }\n\n          this._roundStars(score);\n        }\n      },\n\n      _attributesForIndex: function(i) {\n        var name       = this._nameForIndex(i);\n        var attributes = { alt: i, src: this.opt.path + this.opt[name] };\n\n        if (this.opt.starType !== 'img') {\n          attributes = { 'data-alt': i, 'class': this.opt[name] };\n        }\n\n        attributes.title = this._getHint(i);\n\n        return attributes;\n      },\n\n      _between: function(value, min, max) {\n        return Math.min(Math.max(parseFloat(value), min), max);\n      },\n\n      // TODO: model spec\n      _binds: function() {\n        if (this.cancelButton) {\n          this._bindOverCancel();\n          this._bindClickCancel();\n          this._bindOutCancel();\n        }\n\n        this._bindOver();\n        this._bindClick();\n        this._bindOut();\n      },\n\n      // TODO: model spec\n      _bindClick: function() {\n        var that = this;\n\n        this.stars.on('click.raty', function(evt) {\n          if (that.self.data('readonly')) {\n            return;\n          }\n\n          var execute = true;\n          var score   = (that.opt.half || that.opt.precision) ? that.self.data('score') : (this.alt || $(this).data('alt'));\n\n          if (that.opt.half && !that.opt.precision) {\n            score = that._roundHalfScore(score);\n          }\n\n          if (that.opt.click) {\n            execute = that.opt.click.call(that.element, +score, evt);\n          }\n\n          if (execute || execute === undefined) {\n            that._apply(+score);\n          }\n        });\n      },\n\n      // TODO: model spec\n      _bindClickCancel: function() {\n        this.cancelButton.on('click.raty', function(evt) {\n          this.scoreField.removeAttr('value');\n\n          if (this.opt.click) {\n            this.opt.click.call(this.element, null, evt);\n          }\n        }.bind(this));\n      },\n\n      // TODO: model spec\n      _bindOut: function() {\n        this.self.on('mouseleave.raty', function(evt) {\n          var score = +this.scoreField.val() || undefined;\n\n          this._apply(score);\n          this._target(score, evt);\n          this._resetTitle();\n\n          if (this.opt.mouseout) {\n            this.opt.mouseout.call(this.element, score, evt);\n          }\n        }.bind(this));\n      },\n\n      // TODO: model spec\n      _bindOutCancel: function() {\n        var that = this;\n\n        this.cancelButton.on('mouseleave.raty', function(evt) {\n          var icon = that.opt.cancelOff;\n\n          if (that.opt.starType !== 'img') {\n            icon = that.opt.cancelClass + ' ' + icon;\n          }\n\n          that._setIcon(this, icon);\n\n          if (that.opt.mouseout) {\n            var score = +that.scoreField.val() || undefined;\n\n            that.opt.mouseout.call(that.element, score, evt);\n          }\n        });\n      },\n\n      // TODO: model spec\n      _bindOver: function() {\n        var that   = this;\n        var action = that.opt.half ? 'mousemove.raty' : 'mouseover.raty';\n\n        this.stars.on(action, function(evt) {\n          var score = that._getScoreByPosition(evt, this);\n\n          that._fill(score);\n\n          if (that.opt.half) {\n            that._roundStars(score, evt);\n            that._setTitle(score, evt);\n\n            that.self.data('score', score);\n          }\n\n          that._target(score, evt);\n\n          if (that.opt.mouseover) {\n            that.opt.mouseover.call(that.element, score, evt);\n          }\n        });\n      },\n\n      // TODO: model spec\n      _bindOverCancel: function() {\n        var that = this;\n\n        this.cancelButton.on('mouseover.raty', function(evt) {\n          if (that.self.data('readonly')) {\n            return;\n          }\n\n          var starOff = that.opt.path + that.opt.starOff;\n          var icon    = that.opt.cancelOn;\n\n          if (that.opt.starType === 'img') {\n            that.stars.attr('src', starOff);\n          } else {\n            icon = that.opt.cancelClass + ' ' + icon;\n\n            that.stars.attr('class', starOff);\n          }\n\n          that._setIcon(this, icon);\n          that._target(null, evt);\n\n          if (that.opt.mouseover) {\n            that.opt.mouseover.call(that.element, null);\n          }\n        });\n      },\n\n      // TODO: model spec\n      _buildScoreField: function() {\n        return $('<input />', { name: this.opt.scoreName, type: 'hidden' }).appendTo(this.self);\n      },\n\n      // TODO: model spec\n      _createCancel: function() {\n        var icon   = this.opt.path + this.opt.cancelOff;\n        var button = $('<' + this.opt.starType + ' />', { title: this.opt.cancelHint, 'class': this.opt.cancelClass });\n\n        if (this.opt.starType === 'img') {\n          button.attr({ src: icon, alt: 'x' });\n        } else {\n          // TODO: use $.data\n          button.attr('data-alt', 'x').addClass(icon);\n        }\n\n        if (this.opt.cancelPlace === 'left') {\n          this.self.prepend('&#160;').prepend(button);\n        } else {\n          this.self.append('&#160;').append(button);\n        }\n\n        this.cancelButton = button;\n      },\n\n      // TODO: model spec\n      _createScore: function() {\n        var score = $(this.opt.targetScore);\n\n        this.scoreField = score.length ? score : this._buildScoreField();\n      },\n\n      _createStars: function() {\n        for (var i = 1; i <= this.opt.number; i++) {\n          var attributes = this._attributesForIndex(i);\n\n          $('<' + this.opt.starType + ' />', attributes).appendTo(this.element);\n\n          if (this.opt.space && i < this.opt.number) {\n            this.self.append('&#160;');\n          }\n        }\n\n        this.stars = this.self.children(this.opt.starType);\n      },\n\n      // TODO: model spec\n      _error: function(message) {\n        $(this).text(message);\n\n        $.error(message);\n      },\n\n      _executeCallbacks: function() {\n        var options = ['number', 'readOnly', 'score', 'scoreName', 'target', 'path'];\n\n        for (var i = 0; i < options.length; i++) {\n          if (typeof this.opt[options[i]] === 'function') {\n            var value = this.opt[options[i]].call(this.element);\n\n            if (value) {\n              this.opt[options[i]] = value;\n            } else {\n              delete this.opt[options[i]];\n            }\n          }\n        }\n      },\n\n      // TODO: model spec\n      _fill: function(score) {\n        var hash = 0;\n\n        if (this.opt.iconRangeSame && this.opt.iconRange) {\n          while (hash < this.opt.iconRange.length && this.opt.iconRange[hash].range < score) {\n            hash++;\n          }\n        }\n\n        for (var i = 1; i <= this.stars.length; i++) {\n          var icon;\n          var star   = this.stars[i - 1];\n          var turnOn = this._turnOn(i, score);\n\n          if (this.opt.iconRange && this.opt.iconRange.length > hash) {\n            var irange = this.opt.iconRange[hash];\n\n            icon = this._getRangeIcon(irange, turnOn);\n\n            if (i <= irange.range) {\n              this._setIcon(star, icon);\n            }\n\n            if (i === irange.range) {\n              hash++;\n            }\n          } else {\n            icon = this.opt[turnOn ? 'starOn' : 'starOff'];\n\n            this._setIcon(star, icon);\n          }\n        }\n      },\n\n      _getDecimal: function(number, fractions) {\n        var decimal = number.toString().split('.')[1];\n        var result  = 0;\n\n        if (decimal) {\n          result = parseInt(decimal.slice(0, fractions), 10);\n\n          if (decimal.slice(1, 5) === '9999') {\n            result++;\n          }\n        }\n\n        return result;\n      },\n\n      // TODO: model spec\n      _getRangeIcon: function(irange, turnOn) {\n        return turnOn ? irange.on || this.opt.starOn : irange.off || this.opt.starOff;\n      },\n\n      // TODO: model spec\n      _getScoreByPosition: function(evt, icon) {\n        var score = parseInt(icon.alt || icon.getAttribute('data-alt'), 10);\n\n        if (this.opt.half) {\n          var size    = this._getWidth();\n          var percent = parseFloat((evt.pageX - $(icon).offset().left) / size);\n\n          score = score - 1 + percent;\n        }\n\n        return score;\n      },\n\n      // TODO: model spec\n      _getHint: function(score, evt) {\n        if (score !== 0 && !score) {\n          return this.opt.noRatedMsg;\n        }\n\n        var decimal = this._getDecimal(score, 1);\n        var integer = Math.ceil(score);\n        var group   = this.opt.hints[(integer || 1) - 1];\n        var hint    = group;\n        var set     = !evt || this.isMove;\n\n        if (this.opt.precision) {\n          if (set) {\n            decimal = decimal === 0 ? 9 : decimal - 1;\n          }\n\n          hint = group[decimal];\n        } else if (this.opt.halfShow || this.opt.half) {\n          decimal = set && decimal === 0 ? 1 : decimal > 5 ? 1 : 0;\n\n          hint = group[decimal];\n        }\n\n        return hint === '' ? '' : hint || score;\n      },\n\n      // TODO: model spec\n      _getWidth: function() {\n        var width = this.stars[0].width || parseFloat(this.stars.eq(0).css('font-size'));\n\n        if (!width) {\n          this._error('Could not get the icon width!');\n        }\n\n        return width;\n      },\n\n      // TODO: model spec\n      _lock: function() {\n        var hint = this._getHint(this.scoreField.val());\n\n        this.element.style.cursor = '';\n        this.element.title        = hint;\n\n        this.scoreField.prop('readonly', true);\n        this.stars.prop('title', hint);\n\n        if (this.cancelButton) {\n          this.cancelButton.hide();\n        }\n\n        this.self.data('readonly', true);\n      },\n\n      _nameForIndex: function(i) {\n        return this.opt.score && this.opt.score >= i ? 'starOn' : 'starOff';\n      },\n\n      // TODO: model spec\n      _resetTitle: function() {\n        for (var i = 0; i < this.opt.number; i++) {\n          this.stars[i].title = this._getHint(i + 1);\n        }\n      },\n\n      // TODO: model spec\n      _roundHalfScore: function(score) {\n        var integer = parseInt(score, 10);\n        var decimal = this._getDecimal(score, 1);\n\n        if (decimal !== 0) {\n          decimal = decimal > 5 ? 1 : 0.5;\n        }\n\n        return integer + decimal;\n      },\n\n      // TODO: model spec\n      _roundStars: function(score, evt) {\n        var name = this._starName(score, evt);\n\n        if (name) {\n          var icon = this.opt[name];\n          var star = this.stars[Math.ceil(score) - 1];\n\n          this._setIcon(star, icon);\n        } // Full down: [x.00 .. x.25]\n      },\n\n      // TODO: model spec\n      _setIcon: function(star, icon) {\n        star[this.opt.starType === 'img' ? 'src' : 'className'] = this.opt.path + icon;\n      },\n\n      _setPath: function() {\n        this.opt.path = this.opt.path || '';\n\n        if (this.opt.path && this.opt.path.slice(-1)[0] !== '/') {\n          this.opt.path += '/';\n        }\n      },\n\n      // TODO: model spec\n      _setTarget: function(target, score) {\n        if (score) {\n          score = this.opt.targetFormat.toString().replace('{score}', score);\n        }\n\n        if (target.is(':input')) {\n          target.val(score);\n        } else {\n          target.html(score);\n        }\n      },\n\n      // TODO: model spec\n      _setTitle: function(score, evt) {\n        if (score) {\n          var integer = parseInt(Math.ceil(score), 10);\n          var star    = this.stars[integer - 1];\n\n          star.title = this._getHint(score, evt);\n        }\n      },\n\n      _starName: function(score, evt) {\n        var decimal = +(score % 1).toFixed(2);\n\n        if (evt || this.isMove) {\n          return decimal > 0.5 ? 'starOn' : 'starHalf';\n        }\n\n        if (decimal <= this.opt.round.down) { // Down: [x.00 ... x.25]\n          return;\n        }\n\n        if (this.opt.halfShow && decimal < this.opt.round.up) { // Half: [x.26 ... x.75]\n          return 'starHalf';\n        }\n\n        if (decimal < this.opt.round.full) { // Off: [x.26 .. x.6]\n          return 'starOff';\n        }\n\n        return 'starOn'; // Up: [x.26 ...] || [x.6 ...]\n      },\n\n      // TODO: model spec\n      _target: function(score, evt) {\n        if (this.opt.target) {\n          var target = $(this.opt.target);\n\n          if (!target.length) {\n            this._error('Target selector invalid or missing!');\n          }\n\n          var mouseover = evt && evt.type === 'mouseover';\n\n          if (score === undefined) {\n            score = this.opt.targetText;\n          } else if (score === null) {\n            score = mouseover ? this.opt.cancelHint : this.opt.targetText;\n          } else {\n            if (this.opt.targetType === 'hint') {\n              score = this._getHint(score, evt);\n            } else if (this.opt.precision) {\n              score = parseFloat(score).toFixed(1);\n            }\n\n            var mousemove = evt && evt.type === 'mousemove';\n\n            if (!mouseover && !mousemove && !this.opt.targetKeep) {\n              score = this.opt.targetText;\n            }\n          }\n\n          this._setTarget(target, score);\n        }\n      },\n\n      // TODO: model spec\n      _turnOn: function(i, score) {\n        return this.opt.single ? (i === score) : (i <= score);\n      },\n\n      // TODO: model spec\n      _unlock: function() {\n        this.element.style.cursor = 'pointer';\n        this.element.removeAttribute('title');\n\n        this.scoreField.removeAttr('readonly');\n\n        this.self.data('readonly', false);\n\n        this._resetTitle();\n\n        if (this.cancelButton) {\n          this.cancelButton.css('display', '');\n        }\n      },\n\n      // TODO: model spec\n      cancel: function(click) {\n        if (this.self.data('readonly') !== true) {\n          this[click ? 'click' : 'score'].call(this, null);\n\n          this.scoreField.removeAttr('value');\n        }\n      },\n\n      // TODO: model spec\n      click: function(score) {\n        if (this.self.data('readonly') !== true) {\n          score = this._adjustedScore(score);\n\n          this._apply(score);\n\n          if (this.opt.click) {\n            this.opt.click.call(this.element, score, $.Event('click'));\n          }\n\n          this._target(score);\n        }\n      },\n\n      // TODO: model spec\n      getScore: function() {\n        var score = [];\n        var value ;\n\n        value = this.scoreField.val();\n\n        score.push(value ? +value : undefined);\n\n        return (score.length > 1) ? score : score[0];\n      },\n\n      // TODO: model spec\n      move: function(score) {\n        var integer  = parseInt(score, 10);\n        var decimal  = this._getDecimal(score, 1);\n\n        if (integer >= this.opt.number) {\n          integer = this.opt.number - 1;\n          decimal = 10;\n        }\n\n        var width   = this._getWidth();\n        var steps   = width / 10;\n        var star    = $(this.stars[integer]);\n        var percent = star.offset().left + steps * decimal;\n        var evt     = $.Event('mousemove', { pageX: percent });\n\n        this.isMove = true;\n\n        star.trigger(evt);\n\n        this.isMove = false;\n      },\n\n      // TODO: model spec\n      readOnly: function(readonly) {\n        if (this.self.data('readonly') !== readonly) {\n          if (readonly) {\n            this.self.off('.raty').children(this.opt.starType).off('.raty');\n\n            this._lock();\n          } else {\n            this._binds();\n            this._unlock();\n          }\n\n          this.self.data('readonly', readonly);\n        }\n      },\n\n      // TODO: model spec\n      score: function() {\n        return arguments.length ? this.setScore.apply(this, arguments) : this.getScore();\n      },\n\n      setScore: function(score) {\n        if (this.self.data('readonly') !== true) {\n          score = this._adjustedScore(score);\n\n          this._apply(score);\n          this._target(score);\n        }\n      }\n    };\n\n    return Raty;\n  })();\n}));\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}